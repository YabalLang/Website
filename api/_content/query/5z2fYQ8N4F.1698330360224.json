{"_path":"/docs/advanced-topics/assembly-mode","_dir":"advanced-topics","_draft":false,"_partial":false,"_locale":"","title":"Assembly mode","description":"Learn how to write raw assembly code in Yabal.","tags":["advanced-topics"],"navigation":{"sidebar":true},"body":{"type":"root","children":[{"type":"element","tag":"h1","props":{"id":"assembly-mode"},"children":[{"type":"text","value":"Assembly mode"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Yabal has a special mode called \"assembly mode\". In assembly mode, you can write assembly code directly in your program."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"To enter assembly mode, use the "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"asm"}]},{"type":"text","value":" keyword, followed by a block of code surrounded by curly braces ("},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"{"}]},{"type":"text","value":" and "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"}"}]},{"type":"text","value":"):"}]},{"type":"element","tag":"pre","props":{"className":"language-yabal shiki shiki-themes github-light github-dark","code":"asm {\n    // Assembly code goes here\n}\n","language":"yabal","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D73A49;--shiki-dark:#F97583"},"children":[{"type":"text","value":"asm"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#24292E;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A737D;--shiki-dark:#6A737D"},"children":[{"type":"text","value":"    // Assembly code goes here\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#24292E;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"}\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Assembly mode is useful if you want to use an instruction that is not supported by Yabal, or if you want to optimize a piece of code."}]},{"type":"element","tag":"h2","props":{"id":"comments"},"children":[{"type":"text","value":"Comments"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The default comment style in assembly mode is the same as in Yabal ("},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"//"}]},{"type":"text","value":" for single-line comments and "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"/*"}]},{"type":"text","value":" and "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"*/"}]},{"type":"text","value":" for multi-line comments) but you can also use assembly comments."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Assembly comments start with "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":","}]},{"type":"text","value":" and end at the end of the line:"}]},{"type":"element","tag":"pre","props":{"className":"language-yabal shiki shiki-themes github-light github-dark","code":"asm {\n    , This is an assembly comment\n}\n","language":"yabal","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D73A49;--shiki-dark:#F97583"},"children":[{"type":"text","value":"asm"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#24292E;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A737D;--shiki-dark:#6A737D"},"children":[{"type":"text","value":"    , This is an assembly comment\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#24292E;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"}\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"These comments are are included in the generated assembly code, which can be useful for adding notes to the assembly code."}]},{"type":"element","tag":"h2","props":{"id":"instructions"},"children":[{"type":"text","value":"Instructions"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"To see the list of supported assembly instructions, see the "},{"type":"element","tag":"a","props":{"href":"https://sam-astro.github.io/Astro8-Computer/docs/Architecture/Instruction%20Set.html","rel":["nofollow"]},"children":[{"type":"text","value":"Astro-8 instruction set documentation"}]},{"type":"text","value":"."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"In addition to the instructions listed in the instruction set documentation, Yabal also supports the following instructions:"}]},{"type":"element","tag":"table","props":{},"children":[{"type":"element","tag":"thead","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"th","props":{},"children":[{"type":"text","value":"Instruction"}]},{"type":"element","tag":"th","props":{},"children":[{"type":"text","value":"Description"}]}]}]},{"type":"element","tag":"tbody","props":{},"children":[{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"JE"}]}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"Jump to the specified label if register "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"A"}]},{"type":"text","value":" is equal to register "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"B"}]}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"JNE"}]}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"Jump to the specified label if register "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"A"}]},{"type":"text","value":" is not equal to register "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"B"}]}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"JL"}]}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"Jump to the specified label if register "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"A"}]},{"type":"text","value":" is less than register "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"B"}]}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"JLE"}]}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"Jump to the specified label if register "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"A"}]},{"type":"text","value":" is less than or equal to register "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"B"}]}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"JG"}]}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"Jump to the specified label if register "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"A"}]},{"type":"text","value":" is greater than register "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"B"}]}]}]},{"type":"element","tag":"tr","props":{},"children":[{"type":"element","tag":"td","props":{},"children":[{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"JGE"}]}]},{"type":"element","tag":"td","props":{},"children":[{"type":"text","value":"Jump to the specified label if register "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"A"}]},{"type":"text","value":" is greater than or equal to register "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"B"}]}]}]}]}]},{"type":"element","tag":"h3","props":{"id":"labels"},"children":[{"type":"text","value":"Labels"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Labels are used to mark a location in the assembly code. They are used by jump instructions to jump to a specific location in the code."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Labels are declared by writing the name of the label, followed by a colon ("},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":":"}]},{"type":"text","value":"):"}]},{"type":"element","tag":"pre","props":{"className":"language-yabal shiki shiki-themes github-light github-dark","code":"asm {\n    label:\n}\n","language":"yabal","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D73A49;--shiki-dark:#F97583"},"children":[{"type":"text","value":"asm"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#24292E;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6F42C1;--shiki-dark:#B392F0"},"children":[{"type":"text","value":"    label"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#24292E;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":":\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#24292E;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"}\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"To jump to a label, use the "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"JMP"}]},{"type":"text","value":" instruction:"}]},{"type":"element","tag":"pre","props":{"className":"language-yabal shiki shiki-themes github-light github-dark","code":"asm {\n    label:\n    JMP label\n}\n","language":"yabal","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D73A49;--shiki-dark:#F97583"},"children":[{"type":"text","value":"asm"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#24292E;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#6F42C1;--shiki-dark:#B392F0"},"children":[{"type":"text","value":"    label"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#24292E;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":":\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D73A49;--shiki-dark:#F97583"},"children":[{"type":"text","value":"    JMP"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#6F42C1;--shiki-dark:#B392F0"},"children":[{"type":"text","value":" label\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#24292E;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"}\n"}]}]}]}]},{"type":"element","tag":"warning","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"Note:"}]},{"type":"text","value":" It is only possible to jump to labels that are declared in the same assembly block."}]}]},{"type":"element","tag":"h2","props":{"id":"variable-addresses"},"children":[{"type":"text","value":"Variable addresses"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"In assembly mode, you can get the address of a variable by using "},{"type":"element","tag":"code","props":{"className":""},"children":[{"type":"text","value":"@"}]},{"type":"text","value":" followed by the name of the variable:"}]},{"type":"element","tag":"pre","props":{"className":"language-yabal shiki shiki-themes github-light github-dark","code":"int a = 1\n\nasm {\n    AIN @a // Read the value of a into register A\n    LDIB 1 // Load the value 1 into register B\n    ADD // Add the value of register B to register A\n    STA @a // Store the value of register A into a\n}\n","filename":"run","language":"yabal","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D73A49;--shiki-dark:#F97583"},"children":[{"type":"text","value":"int"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#24292E;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" a "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#D73A49;--shiki-dark:#F97583"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#005CC5;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":" 1\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":2},"children":[{"type":"element","tag":"span","props":{"emptyLinePlaceholder":true},"children":[{"type":"text","value":"\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":3},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D73A49;--shiki-dark:#F97583"},"children":[{"type":"text","value":"asm"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#24292E;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" {\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":4},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D73A49;--shiki-dark:#F97583"},"children":[{"type":"text","value":"    AIN"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#24292E;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" @a "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A737D;--shiki-dark:#6A737D"},"children":[{"type":"text","value":"// Read the value of a into register A\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":5},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D73A49;--shiki-dark:#F97583"},"children":[{"type":"text","value":"    LDIB"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#005CC5;--shiki-dark:#79B8FF"},"children":[{"type":"text","value":" 1"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A737D;--shiki-dark:#6A737D"},"children":[{"type":"text","value":" // Load the value 1 into register B\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":6},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D73A49;--shiki-dark:#F97583"},"children":[{"type":"text","value":"    ADD"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A737D;--shiki-dark:#6A737D"},"children":[{"type":"text","value":" // Add the value of register B to register A\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":7},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#D73A49;--shiki-dark:#F97583"},"children":[{"type":"text","value":"    STA"}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#24292E;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":" @a "}]},{"type":"element","tag":"span","props":{"style":"--shiki-default:#6A737D;--shiki-dark:#6A737D"},"children":[{"type":"text","value":"// Store the value of register A into a\n"}]}]},{"type":"element","tag":"span","props":{"class":"line","line":8},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-default:#24292E;--shiki-dark:#E1E4E8"},"children":[{"type":"text","value":"}\n"}]}]}]}]},{"type":"element","tag":"style","props":{},"children":[{"type":"text","value":"html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"comments","depth":2,"text":"Comments"},{"id":"instructions","depth":2,"text":"Instructions","children":[{"id":"labels","depth":3,"text":"Labels"}]},{"id":"variable-addresses","depth":2,"text":"Variable addresses"}]}},"_type":"markdown","_id":"content:docs:4.advanced-topics:1.assembly-mode.md","_source":"content","_file":"docs/4.advanced-topics/1.assembly-mode.md","_extension":"md"}