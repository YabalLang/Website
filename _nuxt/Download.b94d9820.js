import{g as G,u as m,m as J,q as Q,f as ee,s as se,o as d,c as R,j as P,F as S,a as p,d as T,t as $,i as D,x as te,h as re,v as ne,n as X}from"./entry.a4db21c7.js";import{h as ae,u as oe}from"./index.c5661cad.js";import{g as z}from"./_commonjsHelpers.de833af9.js";function ie(E,e,a){var M;const[n={},c]=typeof e=="string"?[{},e]:[e,a],l=G(()=>{let v=E;return typeof v=="function"&&(v=v()),m(v)}),N=n.key||ae([c,((M=m(n.method))==null?void 0:M.toUpperCase())||"GET",m(n.baseURL),typeof l.value=="string"?l.value:"",m(n.params||n.query),m(n.headers)]);if(!N||typeof N!="string")throw new TypeError("[nuxt] [useFetch] key must be a string: "+N);if(!E)throw new Error("[nuxt] [useFetch] request is missing.");const b=N===c?"$f"+N:N;if(!n.baseURL&&typeof l.value=="string"&&l.value.startsWith("//"))throw new Error('[nuxt] [useFetch] the request URL must not start with "//".');const{server:r,lazy:t,default:w,transform:u,pick:f,watch:h,immediate:s,getCachedData:o,deep:i,...I}=n,A=J({...Q,...I,cache:typeof n.cache=="boolean"?void 0:n.cache}),L={server:r,lazy:t,default:w,transform:u,pick:f,immediate:s,getCachedData:o,deep:i,watch:h===!1?[]:[A,l,...h||[]]};let _;return oe(b,()=>{var U;return(U=_==null?void 0:_.abort)==null||U.call(_),_=typeof AbortController<"u"?new AbortController:{},typeof l.value=="string"&&l.value.startsWith("/"),(n.$fetch||globalThis.$fetch)(l.value,{signal:_.signal,...A})},L)}const Ee=typeof process=="object"&&process.env&&{}.NODE_DEBUG&&/\bsemver\b/i.test({}.NODE_DEBUG)?(...E)=>console.error("SEMVER",...E):()=>{};var q=Ee;const ce="2.0.0",W=256,le=Number.MAX_SAFE_INTEGER||9007199254740991,he=16,pe=W-6,ue=["major","premajor","minor","preminor","patch","prepatch","prerelease"];var Y={MAX_LENGTH:W,MAX_SAFE_COMPONENT_LENGTH:he,MAX_SAFE_BUILD_LENGTH:pe,MAX_SAFE_INTEGER:le,RELEASE_TYPES:ue,SEMVER_SPEC_VERSION:ce,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},C={exports:{}};(function(E,e){const{MAX_SAFE_COMPONENT_LENGTH:a,MAX_SAFE_BUILD_LENGTH:n,MAX_LENGTH:c}=Y,l=q;e=E.exports={};const N=e.re=[],b=e.safeRe=[],r=e.src=[],t=e.t={};let w=0;const u="[a-zA-Z0-9-]",f=[["\\s",1],["\\d",c],[u,n]],h=o=>{for(const[i,I]of f)o=o.split(`${i}*`).join(`${i}{0,${I}}`).split(`${i}+`).join(`${i}{1,${I}}`);return o},s=(o,i,I)=>{const A=h(i),L=w++;l(o,L,i),t[o]=L,r[L]=i,N[L]=new RegExp(i,I?"g":void 0),b[L]=new RegExp(A,I?"g":void 0)};s("NUMERICIDENTIFIER","0|[1-9]\\d*"),s("NUMERICIDENTIFIERLOOSE","\\d+"),s("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${u}*`),s("MAINVERSION",`(${r[t.NUMERICIDENTIFIER]})\\.(${r[t.NUMERICIDENTIFIER]})\\.(${r[t.NUMERICIDENTIFIER]})`),s("MAINVERSIONLOOSE",`(${r[t.NUMERICIDENTIFIERLOOSE]})\\.(${r[t.NUMERICIDENTIFIERLOOSE]})\\.(${r[t.NUMERICIDENTIFIERLOOSE]})`),s("PRERELEASEIDENTIFIER",`(?:${r[t.NUMERICIDENTIFIER]}|${r[t.NONNUMERICIDENTIFIER]})`),s("PRERELEASEIDENTIFIERLOOSE",`(?:${r[t.NUMERICIDENTIFIERLOOSE]}|${r[t.NONNUMERICIDENTIFIER]})`),s("PRERELEASE",`(?:-(${r[t.PRERELEASEIDENTIFIER]}(?:\\.${r[t.PRERELEASEIDENTIFIER]})*))`),s("PRERELEASELOOSE",`(?:-?(${r[t.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${r[t.PRERELEASEIDENTIFIERLOOSE]})*))`),s("BUILDIDENTIFIER",`${u}+`),s("BUILD",`(?:\\+(${r[t.BUILDIDENTIFIER]}(?:\\.${r[t.BUILDIDENTIFIER]})*))`),s("FULLPLAIN",`v?${r[t.MAINVERSION]}${r[t.PRERELEASE]}?${r[t.BUILD]}?`),s("FULL",`^${r[t.FULLPLAIN]}$`),s("LOOSEPLAIN",`[v=\\s]*${r[t.MAINVERSIONLOOSE]}${r[t.PRERELEASELOOSE]}?${r[t.BUILD]}?`),s("LOOSE",`^${r[t.LOOSEPLAIN]}$`),s("GTLT","((?:<|>)?=?)"),s("XRANGEIDENTIFIERLOOSE",`${r[t.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),s("XRANGEIDENTIFIER",`${r[t.NUMERICIDENTIFIER]}|x|X|\\*`),s("XRANGEPLAIN",`[v=\\s]*(${r[t.XRANGEIDENTIFIER]})(?:\\.(${r[t.XRANGEIDENTIFIER]})(?:\\.(${r[t.XRANGEIDENTIFIER]})(?:${r[t.PRERELEASE]})?${r[t.BUILD]}?)?)?`),s("XRANGEPLAINLOOSE",`[v=\\s]*(${r[t.XRANGEIDENTIFIERLOOSE]})(?:\\.(${r[t.XRANGEIDENTIFIERLOOSE]})(?:\\.(${r[t.XRANGEIDENTIFIERLOOSE]})(?:${r[t.PRERELEASELOOSE]})?${r[t.BUILD]}?)?)?`),s("XRANGE",`^${r[t.GTLT]}\\s*${r[t.XRANGEPLAIN]}$`),s("XRANGELOOSE",`^${r[t.GTLT]}\\s*${r[t.XRANGEPLAINLOOSE]}$`),s("COERCE",`(^|[^\\d])(\\d{1,${a}})(?:\\.(\\d{1,${a}}))?(?:\\.(\\d{1,${a}}))?(?:$|[^\\d])`),s("COERCERTL",r[t.COERCE],!0),s("LONETILDE","(?:~>?)"),s("TILDETRIM",`(\\s*)${r[t.LONETILDE]}\\s+`,!0),e.tildeTrimReplace="$1~",s("TILDE",`^${r[t.LONETILDE]}${r[t.XRANGEPLAIN]}$`),s("TILDELOOSE",`^${r[t.LONETILDE]}${r[t.XRANGEPLAINLOOSE]}$`),s("LONECARET","(?:\\^)"),s("CARETTRIM",`(\\s*)${r[t.LONECARET]}\\s+`,!0),e.caretTrimReplace="$1^",s("CARET",`^${r[t.LONECARET]}${r[t.XRANGEPLAIN]}$`),s("CARETLOOSE",`^${r[t.LONECARET]}${r[t.XRANGEPLAINLOOSE]}$`),s("COMPARATORLOOSE",`^${r[t.GTLT]}\\s*(${r[t.LOOSEPLAIN]})$|^$`),s("COMPARATOR",`^${r[t.GTLT]}\\s*(${r[t.FULLPLAIN]})$|^$`),s("COMPARATORTRIM",`(\\s*)${r[t.GTLT]}\\s*(${r[t.LOOSEPLAIN]}|${r[t.XRANGEPLAIN]})`,!0),e.comparatorTrimReplace="$1$2$3",s("HYPHENRANGE",`^\\s*(${r[t.XRANGEPLAIN]})\\s+-\\s+(${r[t.XRANGEPLAIN]})\\s*$`),s("HYPHENRANGELOOSE",`^\\s*(${r[t.XRANGEPLAINLOOSE]})\\s+-\\s+(${r[t.XRANGEPLAINLOOSE]})\\s*$`),s("STAR","(<|>)?=?\\s*\\*"),s("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),s("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(C,C.exports);var Ie=C.exports;const de=Object.freeze({loose:!0}),Re=Object.freeze({}),me=E=>E?typeof E!="object"?de:E:Re;var fe=me;const j=/^[0-9]+$/,Z=(E,e)=>{const a=j.test(E),n=j.test(e);return a&&n&&(E=+E,e=+e),E===e?0:a&&!n?-1:n&&!a?1:E<e?-1:1},Ne=(E,e)=>Z(e,E);var Le={compareIdentifiers:Z,rcompareIdentifiers:Ne};const y=q,{MAX_LENGTH:k,MAX_SAFE_INTEGER:F}=Y,{safeRe:x,t:V}=Ie,$e=fe,{compareIdentifiers:g}=Le;let Oe=class O{constructor(e,a){if(a=$e(a),e instanceof O){if(e.loose===!!a.loose&&e.includePrerelease===!!a.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>k)throw new TypeError(`version is longer than ${k} characters`);y("SemVer",e,a),this.options=a,this.loose=!!a.loose,this.includePrerelease=!!a.includePrerelease;const n=e.trim().match(a.loose?x[V.LOOSE]:x[V.FULL]);if(!n)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>F||this.major<0)throw new TypeError("Invalid major version");if(this.minor>F||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>F||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(c=>{if(/^[0-9]+$/.test(c)){const l=+c;if(l>=0&&l<F)return l}return c}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(y("SemVer.compare",this.version,this.options,e),!(e instanceof O)){if(typeof e=="string"&&e===this.version)return 0;e=new O(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof O||(e=new O(e,this.options)),g(this.major,e.major)||g(this.minor,e.minor)||g(this.patch,e.patch)}comparePre(e){if(e instanceof O||(e=new O(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let a=0;do{const n=this.prerelease[a],c=e.prerelease[a];if(y("prerelease compare",a,n,c),n===void 0&&c===void 0)return 0;if(c===void 0)return 1;if(n===void 0)return-1;if(n===c)continue;return g(n,c)}while(++a)}compareBuild(e){e instanceof O||(e=new O(e,this.options));let a=0;do{const n=this.build[a],c=e.build[a];if(y("prerelease compare",a,n,c),n===void 0&&c===void 0)return 0;if(c===void 0)return 1;if(n===void 0)return-1;if(n===c)continue;return g(n,c)}while(++a)}inc(e,a,n){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",a,n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",a,n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",a,n),this.inc("pre",a,n);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",a,n),this.inc("pre",a,n);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const c=Number(n)?1:0;if(!a&&n===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[c];else{let l=this.prerelease.length;for(;--l>=0;)typeof this.prerelease[l]=="number"&&(this.prerelease[l]++,l=-2);if(l===-1){if(a===this.prerelease.join(".")&&n===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(c)}}if(a){let l=[a,c];n===!1&&(l=[a]),g(this.prerelease[0],a)===0?isNaN(this.prerelease[1])&&(this.prerelease=l):this.prerelease=l}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};var K=Oe;const H=K,Ae=(E,e,a=!1)=>{if(E instanceof H)return E;try{return new H(E,e)}catch(n){if(!a)return null;throw n}};var _e=Ae;const Te=z(_e),B=K,Se=(E,e,a)=>new B(E,a).compare(new B(e,a));var ge=Se;const be=z(ge),we=["href"],ve={class:"mb-2"},De=p("strong",null,"Latest version:",-1),ye={class:"row align-items-center mb-2"},Fe={class:"col-4"},Ge={key:0},Pe={class:"col-4"},Ce=["href"],Me={class:"badge text-bg-primary ms-2"},Ue=p("span",{class:"visually-hidden"},"downloads",-1),Xe={class:"mt-3"},je={class:"border border-radius p-4 mt-3"},ke={class:"text-center small"},xe=p("strong",null,"Note:",-1),Ve=["href"],He=p("hr",{class:"mb-0"},null,-1),Be={class:"row"},ze={class:"col align-self-center"},qe={class:"col-auto"},We={class:"my-1"},Ye=["href"],Ze={class:"badge text-bg-dark ms-2"},Ke=p("span",{class:"visually-hidden"},"downloads",-1),ts=ee({__name:"Download",props:{repo:{}},setup(E){const e=se(!1),a=E,{data:n,refresh:c,pending:l,error:N}=ie(`https://api.github.com/repos/${a.repo}/releases?per_page=100`,{server:!1},"$hOlTjEYG55");var b=function(u,f){return u.reduce(function(h,s){const o=f(s);return(h[o]=h[o]||[]).push(s),h},{})};const r=G(()=>{const u=(n.value??[]).map(s=>({version:Te(s.tag_name),created_at:s.created_at,assets:s.assets.map(o=>({name:o.name,download_url:o.browser_download_url,download_count:o.download_count}))})),f=b(u,s=>s.version.major),h=Object.entries(f);h.sort((s,o)=>o[0]-s[0]);for(const s of h){s[1].sort((o,i)=>be(i.version,o.version));for(const o of s[1])o.assets.sort((i,I)=>i.name.localeCompare(I.name))}return h.map(([s,o])=>({major:s,releases:o.map(i=>({version:i.version,created_at:i.created_at,assets:i.assets.map(I=>({name:I.name,download_url:I.download_url,download_count:I.download_count}))}))}))}),t=G(()=>{var u;return((u=r.value[0])==null?void 0:u.releases[0])??null}),w=G(()=>{const u=[],f=/^yabal-(?<build>[^-.]+)-(?<os>[^-.]+)-(?<arch>[^.]+)(\.zip)?$/,h=/^Astro8-(?<os>[^-_.]+)(?:_(?<arch>[^-.]+))?(?:-Installer)?(\.zip)?/;for(const s of t.value.assets){let o,i;const I=f.exec(s.name)??h.exec(s.name);if(!I||!I.groups)continue;o=I.groups.build??"",i=I.groups.os??"linux",I.groups.arch,i=i.charAt(0).toUpperCase()+i.slice(1),o=o.charAt(0).toUpperCase()+o.slice(1),i==="Win"&&(i="Windows");const A=u.find(L=>L.build===o&&L.os===i);A?A.assets.push(s):u.push({build:o,os:i,assets:[s]})}return u});return(u,f)=>(d(),R("div",null,[m(N)?(d(),R("a",{key:0,href:`https://github.com/${u.repo}/releases`},"See the releases page on GitHub",8,we)):P("",!0),m(t)?(d(),R(S,{key:1},[p("div",ve,[De,T(" "+$(m(t).version),1)]),(d(!0),R(S,null,D(m(w),h=>(d(),R("div",ye,[p("div",Fe,[h.build?(d(),R("span",Ge,$(h.build)+" - ",1)):P("",!0),T(" "+$(h.os),1)]),(d(!0),R(S,null,D(h.assets,s=>(d(),R("div",Pe,[p("a",{class:"d-flex btn btn-outline-primary align-items-center justify-content-between",href:s.download_url},[p("span",null,$(s.name),1),p("span",Me,[T($(s.download_count)+" ",1),Ue])],8,Ce)]))),256))]))),256)),p("div",Xe,[p("a",{href:"#",onClick:f[0]||(f[0]=te(h=>e.value=!m(e),["prevent"]))},$(m(e)?"Hide":"Show")+" old versions ",1)])],64)):P("",!0),re(p("div",je,[p("div",ke,[xe,T(" Only the latest 100 releases are shown here. For older versions, "),p("a",{href:`https://github.com/${u.repo}/releases`},"see the releases page on GitHub",8,Ve),T(". ")]),He,(d(!0),R(S,null,D(m(r),h=>(d(),R("div",null,[p("h3",null,"Version "+$(h.major),1),(d(!0),R(S,null,D(h.releases,(s,o)=>(d(),R("div",{class:X([o%2===0?"bg-body-secondary":"","p-3",o===0?"border-bottom bg-primary-subtle":"py-2"])},[p("div",Be,[p("div",ze,[p("span",{class:X(o===0&&"fw-bold")},$(s.version),3)]),p("div",qe,[(d(!0),R(S,null,D(s.assets,i=>(d(),R("div",We,[p("a",{class:"d-flex btn btn-light align-items-center justify-content-between",href:i.download_url},[T($(i.name)+" ",1),p("span",Ze,[T($(i.download_count)+" ",1),Ke])],8,Ye)]))),256))])])],2))),256))]))),256))],512),[[ne,m(e)]])]))}});export{ts as default};
